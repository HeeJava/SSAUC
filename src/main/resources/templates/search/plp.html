<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout.html">
<head>
    <meta charset="UTF-8">
    <title>검색 결과 - SSAUC</title>
    <!-- list.html 스타일을 반영하되, 파일명은 plp.css로 구성 -->
    <link rel="stylesheet" th:href="@{/css/plp.css}">
    <!-- plp.js (아래에서 설명) -->
    <script th:src="@{/js/plp.js}"></script>
</head>
<body>
<div class="container" layout:fragment="content">

    <!--
        [1] 상단 검색바 + 자동완성 + 연관검색어
        - 기존 plp.html의 검색 로직을 그대로 사용하되,
          위치나 CSS를 list.html과 유사하게 조정
    -->
    <div class="search-bar-wrapper">
        <div class="search-bar">
            <!-- 검색어 입력 -->
            <input type="text" id="searchInput" placeholder="검색어를 입력하세요." th:value="${keyword}">
            <!-- 검색 버튼 -->
            <button type="submit" id="searchIcon" class="icon-btn">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Magnifying_glass_icon.svg/768px-Magnifying_glass_icon.svg.png"
                     alt="검색 아이콘" width="40px" height="40px">
            </button>
        </div>
        <!-- 검색어 미입력 시 알림 -->
        <div id="searchAlert" class="alert alert-warning mt-2" style="display: none;">
            검색어를 입력해주세요.
        </div>

        <!-- 연관 검색어 영역 -->
        <div id="relatedSearchContainer" class="related-search-container" style="display:none;">
            <h3>연관 검색어</h3>
            <ul id="relatedSearchList"></ul>
        </div>

        <!-- 자동완성 목록 (절대 위치) -->
        <ul id="autoCompleteList"
            style="position:absolute; display:none; border:1px solid #ddd; background:#fff; z-index:999;">
            <!-- JS로 LI 태그 생성 -->
        </ul>
    </div>

    <div class="row">
        <!-- [2] 왼쪽 사이드바(필터) : list.html의 사이드바와 동일 -->
        <aside class="col-md-3 filters">
            <h5>필터</h5>
            <!-- 경매 중인 상품만 보기 (판매완료 상품 제외) -->
            <div class="filter-section">
                <label>
                    <input type="checkbox" id="auctionOnlyCheckbox"> 경매 중인 상품만 보기
                </label>
            </div>

            <!-- 카테고리 다중 선택 -->
            <div class="filter-section">
                <h6>카테고리</h6>
                <ul id="filterCategory">
                    <!-- JS로 생성 -->
                </ul>
            </div>

            <!-- 가격 필터 -->
            <div class="filter-section">
                <h6>가격</h6>
                <div class="price-input">
                    <input type="number" id="minPriceInput" placeholder="최소가" min="0">
                    <span>~</span>
                    <input type="number" id="maxPriceInput" placeholder="최대가" min="0">
                    <button onclick="filterByInputPrice()" style="width: 30px; height: 30px; align-items: center">🔍</button>
                </div>
            </div>

            <button id="filterResetBtn" class="btn btn-secondary btn-sm mt-3">필터 초기화</button>
        </aside>

        <!-- [3] 오른쪽 상품 목록 + "총 O개의 상품" + 정렬 -->
        <section class="col-md-9 product-results">
            <div class="results-header d-flex justify-content-between align-items-center mb-3">
                <!-- 총 몇 개의 상품인지 표시 -->
                <span id="totalCountLabel">총 0개의 상품</span>

                <!-- 정렬 옵션 -->
                <select id="sortSelect" class="form-select form-select-sm">
                    <option value="VIEW_DESC">기본순 (조회수 많은 순)</option>
                    <option value="LIKE_DESC">좋아요 많은 순</option>
                    <option value="PRICE_ASC">낮은 가격순</option>
                    <option value="PRICE_DESC">높은 가격순</option>
                    <option value="BID_DESC">입찰 많은 순</option>
                    <option value="RECENT">최신 등록순</option>
                </select>
            </div>

            <!-- 한 줄 5개씩, 최대 30개 (row-cols-lg-5) -->
            <div id="productGrid" class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-3">
                <!-- JS에서 상품 생성 -->
            </div>

            <!-- 페이지네이션 -->
            <nav id="pagination" class="mt-4">
                <!-- JS에서 페이지 버튼 생성 -->
            </nav>
        </section>
    </div>
</div>

</body>
</html>
